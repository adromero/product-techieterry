---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import DecadeNav from '../components/DecadeNav.astro';
import PostCard from '../components/PostCard.astro';

const allPosts = await getCollection('posts');
const sortedPosts = allPosts.sort((a, b) => a.data.date.getTime() - b.data.date.getTime());
---

<BaseLayout title="Techie Terry's Tech Blog" description="Chronicling the eternal optimism of technology since the 1980s" isHomePage={true}>
  <div class="container mx-auto px-4 py-8 max-w-6xl">
    <DecadeNav />

    <section class="mt-8">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">All Posts</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {sortedPosts.map((post) => (
          <PostCard post={post} />
        ))}
      </div>
    </section>
  </div>

  <Footer />
</BaseLayout>
